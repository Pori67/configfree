<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فری نت - اینترنت آزاد و امن</title>
    <meta name="description" content="فری نت، سرویس VPN رایگان و حرفه‌ای برای دسترسی به اینترنت آزاد و امن">
    <meta name="keywords" content="VPN, فری نت, اینترنت آزاد, V2Ray, سرویس VPN رایگان">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/@fontsource/iransans@4.0.0/index.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['IRANSans', 'Tahoma', 'Arial', 'sans-serif']
                    },
                    colors: {
                        primary: '#8B5CF6', // بنفش
                        secondary: '#1E1B4B', // آبی تیره
                        accent: '#38BDF8', // آبی روشن
                    },
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'IRANSans', sans-serif;
            background-color: #0F172A;
            color: #F1F5F9;
        }
        .hero-bg {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://source.unsplash.com/random/1920x1080/?tech');
            background-size: cover;
            background-position: center;
        }
        .card {
            background: #1E293B;
            border-radius: 1rem;
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
        }
        .status-dot {
            background: #8B5CF6;
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.8);
            animation: pulse 2s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Full-Screen Hero Header -->
    <header class="hero-bg h-screen flex items-center justify-center text-center">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-center space-x-4 space-x-reverse mb-6">
                <span class="text-5xl text-primary">🚀</span>
                <h1 class="text-4xl md:text-6xl font-bold text-white">فری نت</h1>
            </div>
            <h2 class="text-2xl md:text-4xl font-bold text-white mb-4">اینترنت آزاد و امن</h2>
            <p class="text-lg md:text-xl text-gray-300 mb-8">اتصال سریع و رایگان به دنیای بدون محدودیت</p>
            <a href="#sublink" class="bg-primary hover:bg-accent text-white px-8 py-3 rounded-lg font-bold text-lg">شروع کنید</a>
        </div>
    </header>

    <!-- Status Section -->
    <section class="py-16 bg-secondary">
        <div class="container mx-auto px-4 text-center">
            <div class="card p-8 max-w-3xl mx-auto">
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
                    <div>
                        <p class="text-sm text-gray-400">وضعیت</p>
                        <div class="flex items-center justify-center">
                            <span class="status-dot w-3 h-3 rounded-full mr-2"></span>
                            <span id="uptime" class="font-bold text-primary">99.99%</span>
                        </div>
                    </div>
                    <div>
                        <p class="text-sm text-gray-400">سرورهای فعال</p>
                        <span id="activeServers" class="font-bold text-primary">24</span>
                    </div>
                    <div>
                        <p class="text-sm text-gray-400">پینگ</p>
                        <span id="serverPing" class="font-bold text-primary">-- ms</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Subscription Link -->
    <section id="sublink" class="py-16 container mx-auto px-4">
        <div class="card p-8 max-w-2xl mx-auto text-center">
            <h2 class="text-3xl font-bold mb-4">لینک اشتراک</h2>
            <p class="text-gray-300 mb-6">لینک را کپی کنید تا به سرورهای ما متصل شوید.</p>
            <div class="bg-gray-700 rounded-lg p-4 mb-6">
                <p id="subLink" class="font-mono text-primary break-all">https://pppppppp-bth.pages.dev/sub/full-normal/yb0jfuGF*F0hd0BP?app=xray#%F0%9F%92%A6%20BPB%20Full%20Normal</p>
            </div>
            <button onclick="copySubLink()" class="bg-primary hover:bg-accent text-white px-6 py-3 rounded-lg font-bold" aria-label="کپی لینک اشتراک">
                <i class="fa-solid fa-copy mr-2"></i>کپی لینک
            </button>
        </div>
    </section>

    <!-- Config and QR Code -->
    <section id="configs" class="py-16 bg-secondary">
        <div class="container mx-auto px-4">
            <div class="card p-8 max-w-4xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-2xl font-bold mb-4">انتخاب کانفیگ</h3>
                        <div id="config-list-container" class="space-y-3 max-h-64 overflow-y-auto"></div>
                    </div>
                    <div class="text-center">
                        <h3 class="text-2xl font-bold mb-4">QR کد</h3>
                        <div class="bg-white rounded-lg p-4 mb-6 inline-block">
                            <div id="qrcode"></div>
                        </div>
                        <select id="configSelect" onchange="generateQR()" class="w-full bg-gray-700 text-white p-3 rounded-lg"></select>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Download Section -->
    <section id="download" class="py-16 container mx-auto px-4">
        <h2 class="text-3xl font-bold text-center mb-8">دانلود کلاینت‌ها</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 max-w-5xl mx-auto">
            <a href="https://play.google.com/store/apps/details?id=app.hiddify.com&pli=1" class="card p-6 text-center">
                <i class="fa-brands fa-android text-5xl text-primary mb-4"></i>
                <h3 class="font-bold">اندروید</h3>
                <p class="text-gray-400">hiddify</p>
            </a>
            <a href="https://apps.apple.com/us/app/hiddify-proxy-vpn/id6596777532?platform=iphone" class="card p-6 text-center">
                <i class="fa-brands fa-apple text-5xl text-primary mb-4"></i>
                <h3 class="font-bold">iOS</h3>
                <p class="text-gray-400">hiddify</p>
            </a>
            <a href="https://github.com/hiddify/hiddify-app/releases/latest/download/Hiddify-Windows-Setup-x64.Msix" class="card p-6 text-center">
                <i class="fa-brands fa-windows text-5xl text-primary mb-4"></i>
                <h3 class="font-bold">ویندوز</h3>
                <p class="text-gray-400">hiddify</p>
            </a>
            <a href="https://github.com/hiddify/hiddify-next/releases" class="card p-6 text-center">
                <i class="fa-brands fa-apple text-5xl text-primary mb-4"></i>
                <h3 class="font-bold">macOS</h3>
                <p class="text-gray-400">Hiddify Next</p>
            </a>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="py-16 bg-secondary">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-8">سوالات متداول</h2>
            <div id="faq-container" class="max-w-3xl mx-auto space-y-4"></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-8 bg-secondary text-center">
        <p class="text-gray-400">© 1404 فرینت - ساخته شده با ❤️ برای اینترنت آزاد</p>
        <div class="flex justify-center space-x-4 mt-4">
            <a href="https://t.me/ropia67" class="text-primary hover:text-accent"><i class="fa-brands fa-telegram text-2xl"></i></a>
        </div>
    </footer>

    <!-- JavaScript (بدون تغییر نسبت به کد اصلی) -->
    <script>
        const configs = {
            cf_de_1: { name: 'VLESS - ', config: 'https://raw.githubusercontent.com/barry-far/V2ray-config/main/Splitted-By-Protocol/vless.txt' },
            cf_de_2: { name: 'Vmess - ', config: 'https://raw.githubusercontent.com/barry-far/V2ray-config/main/Splitted-By-Protocol/vmess.txt' },
            cf_de_tr_7: { name: 'Trojan - ', config: 'https://raw.githubusercontent.com/barry-far/V2ray-config/main/Splitted-By-Protocol/trojan.txt' },
        };

        const faqData = [
            { question: "آیا این سرویس رایگان است؟", answer: "بله، فری نت کاملاً رایگان است و برای دسترسی آزاد به اینترنت طراحی شده است." },
            { question: "چگونه سرعت را بهبود دهم؟", answer: "سروری با پینگ پایین‌تر انتخاب کنید و برنامه‌های پرمصرف را ببندید." },
            { question: "آیا امن است؟", answer: "بله، از پروتکل‌های رمزنگاری پیشرفته برای امنیت شما استفاده می‌کنیم." },
        ];

        document.addEventListener('DOMContentLoaded', () => {
            showWelcomeToast();
            buildFAQ();
            buildConfigList();
            buildQRSelect();
            updateServerStats();
            setInterval(updateServerStats, 3000);
            getUserInfo();

            setTimeout(() => {
                const select = document.getElementById('configSelect');
                if (select.options.length > 0) {
                    generateQR();
                } else {
                    document.getElementById('qrcode').innerHTML = '<p class="text-red-400">هیچ کانفیگی برای نمایش وجود ندارد</p>';
                }
            }, 0);
        });

        function updateServerStats() {
            document.getElementById('uptime').textContent = (99.99 + (Math.random() - 0.5) * 0.01).toFixed(2) + '%';
            document.getElementById('serverPing').textContent = Math.round(50 + (Math.random() - 0.5) * 20) + ' ms';
        }

        async function getUserInfo() {
            try {
                const response = await fetch('https://ipapi.co/json/', { signal: AbortSignal.timeout(5000) });
                if (!response.ok) throw new Error('Failed to fetch IP info');
                const data = await response.json();
            } catch (error) {
                showToast('خطا در دریافت اطلاعات کاربر!', 'error');
            }
        }

        function buildConfigList() {
            const container = document.getElementById('config-list-container');
            container.innerHTML = '';
            Object.keys(configs).forEach(key => {
                const button = document.createElement('button');
                button.className = 'w-full bg-gray-700 hover:bg-gray-600 text-white p-3 rounded-lg flex justify-between';
                button.innerHTML = `<span>${configs[key].name}</span><i class="fa-solid fa-copy"></i>`;
                button.setAttribute('aria-label', `کپی کانفیگ ${configs[key].name}`);
                button.onclick = () => copyToClipboard(configs[key].config, 'کانفیگ کپی شد!');
                container.appendChild(button);
            });
        }

        function buildQRSelect() {
            const select = document.getElementById('configSelect');
            select.innerHTML = '';
            Object.keys(configs).forEach(key => {
                const option = document.createElement('option');
                option.value = key;
                option.textContent = configs[key].name;
                select.appendChild(option);
            });
        }

        function generateQR() {
            const select = document.getElementById('configSelect');
            const qrContainer = document.getElementById('qrcode');
            qrContainer.innerHTML = '';
            try {
                if (!select.value || !configs[select.value]) {
                    throw new Error('هیچ کانفیگی انتخاب نشده است یا کانفیگ نامعتبر است.');
                }
                const qr = qrcode(0, 'M');
                qr.addData(configs[select.value].config);
                qr.make();
                qrContainer.innerHTML = qr.createSvgTag({ cellSize: 8, margin: 4, scalable: true });
                const svg = qrContainer.querySelector('svg');
                svg.style.width = '100%';
                svg.style.height = 'auto';
                svg.style.maxWidth = '250px';
            } catch (error) {
                qrContainer.innerHTML = '<p class="text-red-400">خطا در تولید QR کد: ' + error.message + '</p>';
                showToast('خطا در تولید QR کد!', 'error');
            }
        }

        function copySubLink() {
            copyToClipboard(document.getElementById('subLink').textContent, 'لینک کپی شد!');
        }

        async function copyToClipboard(text, message) {
            try {
                await navigator.clipboard.writeText(text);
                showToast(message, 'success');
            } catch {
                showToast('خطا در کپی کردن!', 'error');
            }
        }

        function buildFAQ() {
            const container = document.getElementById('faq-container');
            faqData.forEach(item => {
                const faqItem = document.createElement('div');
                faqItem.className = 'card p-4';
                faqItem.innerHTML = `
                    <div class="faq-question flex justify-between items-center cursor-pointer" role="button" aria-expanded="false">
                        <h3 class="font-bold">${item.question}</h3>
                        <i class="fa-solid fa-chevron-down text-gray-400"></i>
                    </div>
                    <div class="faq-answer max-h-0 overflow-hidden transition-all duration-300">
                        <p class="p-4 text-gray-300">${item.answer}</p>
                    </div>`;
                container.appendChild(faqItem);
                faqItem.querySelector('.faq-question').addEventListener('click', () => {
                    const answer = faqItem.querySelector('.faq-answer');
                    const icon = faqItem.querySelector('i');
                    const isExpanded = faqItem.querySelector('.faq-question').getAttribute('aria-expanded') === 'true';
                    faqItem.querySelector('.faq-question').setAttribute('aria-expanded', !isExpanded);
                    answer.style.maxHeight = answer.style.maxHeight ? null : `${answer.scrollHeight}px`;
                    icon.classList.toggle('rotate-180');
                });
            });
        }

        function showWelcomeToast() {
            if (sessionStorage.getItem('welcomeShown')) return;
            showToast('به فری نت خوش آمدید! 🚀', 'success');
            sessionStorage.setItem('welcomeShown', 'true');
        }

        function showToast(message, type) {
            const toast = document.createElement('div');
            toast.className = `fixed bottom-4 right-4 p-4 rounded-lg shadow-lg text-white ${type === 'success' ? 'bg-primary' : 'bg-red-500'}`;
            toast.innerHTML = `<i class="fa-solid ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'} mr-2"></i>${message}`;
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 500);
            }, 3000);
        }
    </script>
</body>
</html>
